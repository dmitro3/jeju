{
  "$schema": "../../packages/config/jeju-manifest.schema.json",
  "name": "factory",
  "displayName": "Factory",
  "version": "1.0.0",
  "description": "Developer coordination hub - bounties, jobs, git, packages, containers, models, project management",
  "type": "app",
  "maintainer": "jeju-network",
  "repository": "https://github.com/jejunetwork/jeju",
  "commands": {
    "dev": "bun run dev",
    "build": "bun run build",
    "start": "bun run start",
    "test": "bun run test:e2e",
    "deploy": "bun run scripts/deploy.ts"
  },
  "ports": {
    "main": 4009
  },
  "dependencies": [
    "contracts",
    "dws",
    "messaging",
    "indexer",
    "crucible",
    "autocrat"
  ],
  "optional": false,
  "enabled": true,
  "autoStart": true,
  "tags": [
    "factory",
    "bounties",
    "jobs",
    "git",
    "packages",
    "containers",
    "models",
    "projects",
    "collaboration",
    "agents",
    "decentralized"
  ],
  "jns": {
    "name": "factory.jeju",
    "description": "Developer coordination and collaboration hub",
    "url": "https://factory.jejunetwork.org"
  },
  "healthCheck": {
    "url": "http://localhost:4009/api/health",
    "interval": 30000
  },
  "agent": {
    "enabled": true,
    "a2aEndpoint": "/api/a2a",
    "mcpEndpoint": "/api/mcp",
    "tags": [
      "jeju-app",
      "factory",
      "bounties",
      "jobs",
      "collaboration"
    ],
    "metadata": {
      "category": "developer-tools",
      "provider": "jeju-network",
      "features": [
        "bounties",
        "jobs",
        "git",
        "packages",
        "containers",
        "models",
        "projects",
        "collaboration",
        "agent-hiring",
        "guardian-validation"
      ]
    },
    "trustModels": [
      "open",
      "staked"
    ],
    "x402Support": true,
    "multiTokenPayments": true,
    "jnsName": "factory.jeju"
  },
  "dws": {
    "backend": {
      "enabled": true,
      "runtime": "workerd",
      "entrypoint": "api/worker.ts",
      "memory": 512,
      "timeout": 30000,
      "minInstances": 1,
      "maxInstances": 10,
      "teeRequired": false,
      "regions": [
        "global"
      ]
    },
    "cdn": {
      "enabled": true,
      "regions": [
        "global"
      ],
      "staticDir": "dist/client",
      "cacheRules": [
        {
          "pattern": "/assets/**",
          "ttl": 31536000,
          "immutable": true
        },
        {
          "pattern": "/*.js",
          "ttl": 86400
        },
        {
          "pattern": "/*.css",
          "ttl": 86400
        },
        {
          "pattern": "/**/*.html",
          "ttl": 60,
          "staleWhileRevalidate": 3600
        }
      ]
    }
  },
  "contracts": {
    "_comment": "Addresses from packages/config/contracts.json for localnet. Env overrides: VITE_{NAME}_ADDRESS",
    "BountyRegistry": "0x0B36Ef2cb78859C20c8C1380CeAdB75043aA92b3",
    "IdentityRegistry": "0x0165878a594ca255338adfa4d48449f69242eb8f",
    "ReputationRegistry": "0x68B1D87F95878fE05B998F19b66F4baba5De1aed",
    "RepoRegistry": "0x0dcd1bf9a1b36ce34237eeafef220932846bcd82",
    "PackageRegistry": "0x9a9f2ccfde556a7e9ff0848998aa4a0cfd8863ae",
    "ContainerRegistry": "0xc6e7df5e7b4f2a278906862b61205850344d4e7d",
    "GitRegistry": "0x959922be3caee4b8cd9a407cc3ac1c251c2007b1",
    "StorageManager": "0x610178da211fef7d417bc0e6fed39f05609ad788",
    "WorkerRegistry": "0xb7f8bc63bbcad18155201308c8f3540b07f84f5e",
    "ComputeRegistry": "0x53AAfBd184086d72fA233AE83e1a7B1339B5415C",
    "InferenceServing": "0x08A90aF9A6eBBe11c322AD9930CC58E122231B5A",
    "DAORegistry": "0x1291Be112d480055DaFd8a610b7d1e203891C274"
  },
  "capabilities": {
    "bounties": true,
    "jobs": true,
    "git": true,
    "packages": true,
    "containers": true,
    "models": true,
    "projects": true,
    "feed": true,
    "messaging": true,
    "agentCollaboration": true,
    "guardianValidation": true,
    "aiGovernance": true
  },
  "integrations": {
    "crucible": {
      "enabled": true,
      "features": [
        "agent-hiring",
        "pr-review",
        "bounty-validation",
        "code-audit"
      ]
    },
    "autocrat": {
      "enabled": true,
      "features": [
        "governance-proposals",
        "director-feedback",
        "reputation",
        "disputes"
      ]
    },
    "farcaster": {
      "enabled": true,
      "channel": "factory",
      "features": [
        "feed",
        "comments",
        "messaging"
      ]
    },
    "dws": {
      "enabled": true,
      "features": [
        "git",
        "packages",
        "containers",
        "compute",
        "storage",
        "cdn",
        "ci"
      ]
    },
    "kms": {
      "enabled": true,
      "provider": "mpc",
      "features": [
        "secret-management",
        "threshold-signing"
      ]
    }
  },
  "decentralization": {
    "level": "full",
    "worker": {
      "name": "factory-api",
      "entrypoint": "api/worker.ts",
      "runtime": "workerd",
      "memory": 512,
      "timeout": 30000,
      "compatibilityDate": "2025-06-01",
      "routes": [
        { "pattern": "/api/*" },
        { "pattern": "/a2a/*" },
        { "pattern": "/mcp/*" },
        { "pattern": "/health" }
      ]
    },
    "frontend": {
      "hosting": "ipfs",
      "gateway": "jns",
      "caching": "dws-cdn",
      "buildOutput": "dist",
      "staticExport": true
    },
    "backend": {
      "compute": "dws-compute",
      "storage": "ipfs",
      "database": "sqlit"
    },
    "nodeDiscovery": {
      "method": "on-chain",
      "registry": "IdentityRegistry",
      "tag": "dws",
      "fallbackUrl": "http://localhost:4030"
    },
    "authentication": {
      "method": "wallet-signature",
      "header": "x-jeju-signature"
    },
    "secrets": {
      "provider": "mpc-kms",
      "threshold": 2,
      "totalParties": 3
    },
    "cdn": {
      "enabled": true,
      "regions": [
        "global"
      ],
      "cacheRules": [
        {
          "pattern": "/assets/**",
          "ttl": 31536000,
          "immutable": true
        },
        {
          "pattern": "/images/**",
          "ttl": 86400
        },
        {
          "pattern": "/api/**",
          "ttl": 0
        }
      ],
      "invalidateOnDeploy": true
    },
    "robustness": {
      "multiOrigin": true,
      "automaticFailover": true,
      "p2pFallback": true,
      "contentAddressed": true
    }
  },
  "env": {
    "required": [
      "PUBLIC_CHAIN_ID",
      "PUBLIC_RPC_URL"
    ],
    "optional": [
      "PUBLIC_DWS_URL",
      "PUBLIC_IDENTITY_REGISTRY_ADDRESS",
      "PUBLIC_CRUCIBLE_URL",
      "PUBLIC_AUTOCRAT_URL",
      "PUBLIC_KMS_ENDPOINT",
      "PUBLIC_MESSAGING_URL",
      "NEYNAR_API_KEY",
      "FARCASTER_CHANNEL_ID"
    ]
  },
  "architecture": {
    "type": "hybrid",
    "frontend": {
      "type": "spa",
      "builder": "bun",
      "entrypoint": "index.html",
      "outputDir": "dist/client"
    }
  }
}
