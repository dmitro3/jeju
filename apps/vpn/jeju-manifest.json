{
  "$schema": "../../packages/config/jeju-manifest.schema.json",
  "name": "vpn",
  "displayName": "Jeju VPN",
  "version": "0.1.0",
  "type": "app",
  "description": "Free, decentralized VPN powered by the community. Unlimited VPN access in exchange for contributing bandwidth to the network.",
  "commands": {
    "dev": "bun run dev",
    "dev:web": "bun run dev:web",
    "dev:api": "bun run dev:api",
    "build": "bun run build",
    "build:extension": "bun run build:extension",
    "start": "bun run start",
    "test": "bun run test"
  },
  "ports": {
    "web": 1421,
    "api": 4021,
    "wireguard": 51820
  },
  "dependencies": ["contracts", "config", "dws"],
  "optional": false,
  "enabled": true,
  "autoStart": true,
  "tags": ["vpn", "wireguard", "socks5", "privacy", "decentralized", "infrastructure", "browser-extension", "jns", "name-service"],
  "browserExtension": {
    "enabled": true,
    "path": "extension/",
    "name": "Jeju VPN & Name Service",
    "features": ["proxy", "jns-resolution", "webrtc-protection"],
    "permissions": ["proxy", "webRequest", "webNavigation", "storage"],
    "stores": {
      "chrome": "pending",
      "firefox": "pending",
      "edge": "pending"
    }
  },
  "lander": {
    "enabled": true,
    "type": "downloads",
    "buildDir": "dist/lander",
    "routes": {
      "/": "landing page with downloads"
    }
  },
  "release": {
    "type": "extension",
    "platforms": ["chrome", "firefox", "edge"],
    "hasDownloads": true,
    "buildCommand": "bun run build:extension"
  },
  "jns": {
    "name": "vpn.jeju",
    "description": "Decentralized VPN Network",
    "url": "https://vpn.jejunetwork.org"
  },
  "healthCheck": {
    "url": "http://localhost:4021/health",
    "interval": 30000
  },
  "agent": {
    "enabled": true,
    "a2aEndpoint": "/a2a",
    "mcpEndpoint": "/mcp",
    "tags": ["jeju-app", "vpn", "privacy", "infrastructure"],
    "metadata": {
      "category": "infrastructure",
      "provider": "jeju-network",
      "features": ["wireguard", "socks5-proxy", "cdn-serving", "bandwidth-sharing"]
    },
    "trustModels": ["staked"],
    "x402Support": true,
    "jnsName": "vpn.jeju"
  },
  "dws": {
    "backend": {
      "enabled": true,
      "runtime": "workerd",
      "entrypoint": "api/worker.ts",
      "memory": 256,
      "timeout": 30000,
      "minInstances": 2,
      "maxInstances": 20,
      "teeRequired": false,
      "regions": ["global"]
    },
    "cdn": {
      "enabled": true,
      "regions": ["global"],
      "staticDir": "dist/web",
      "cacheRules": [
        { "pattern": "/assets/**", "ttl": 31536000, "immutable": true },
        { "pattern": "/*.js", "ttl": 86400 },
        { "pattern": "/*.css", "ttl": 86400 },
        { "pattern": "/**/*.html", "ttl": 60, "staleWhileRevalidate": 3600 }
      ]
    }
  },
  "decentralization": {
    "worker": {
      "name": "vpn-api",
      "entrypoint": "api/worker.ts",
      "runtime": "workerd",
      "memory": 256,
      "timeout": 30000,
      "compatibilityDate": "2025-06-01",
      "routes": [
        { "pattern": "/api/*" },
        { "pattern": "/a2a/*" },
        { "pattern": "/mcp/*" },
        { "pattern": "/health" }
      ]
    },
    "cdn": {
      "enabled": true,
      "regions": ["global"],
      "cacheRules": [
        { "pattern": "/assets/**", "ttl": 31536000, "immutable": true },
        { "pattern": "/api/**", "ttl": 0 },
        { "pattern": "/**/*.html", "ttl": 60, "staleWhileRevalidate": 3600 }
      ],
      "serviceWorker": true
    },
    "frontend": {
      "ipfs": true,
      "arweave": true,
      "jnsName": "vpn.jeju",
      "buildDir": "dist",
      "spa": true
    },
    "robustness": {
      "multiOrigin": true,
      "offlineSupport": true,
      "p2pFallback": true,
      "contentAddressed": true
    }
  },
  "testing": {
    "unit": {
      "command": "bun test src",
      "timeout": 60000
    },
    "e2e": {
      "command": "playwright test",
      "timeout": 300000,
      "requiresChain": false
    }
  }
}
