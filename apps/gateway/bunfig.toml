[test]
coverage = true
coverageDir = "./test-results/coverage"
# Use shared test infrastructure for setup/teardown
preload = ["@jejunetwork/tests/bun-global-setup"]

# Mark server-only packages as external for browser builds
[serve.static]
external = [
  "@google-cloud/*",
  "@grpc/*",
  "google-gax",
  "google-auth-library",
  "native-dns",
  "native-dns-cache",
  "@farcaster/hub-nodejs",
  "@opentelemetry/*",
  "bun:sqlite",
  "node:*"
]
