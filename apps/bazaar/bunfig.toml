# Bun configuration for Bazaar

[serve.static]
# TailwindCSS plugin
plugins = ["bun-plugin-tailwind"]

# Inline environment variables with PUBLIC_ prefix
env = "PUBLIC_*"

[build]
# External packages that shouldn't be bundled (server-only)
external = [
  "@jejunetwork/db",
  "bun:sqlite",
  "child_process",
  "http2",
  "tls",
  "dgram",
  "google-gax",
  "google-auth-library",
  "@grpc/grpc-js",
  "native-dns",
  "native-dns-cache"
]

[test]
coverage = true
coverageDir = "./test-results/coverage"
# Only run unit and integration tests with bun test
# E2E/Playwright tests are run separately with: bunx playwright test
include = ["tests/unit/**/*.test.ts", "tests/integration/**/*.test.ts", "tests/validation-checks.test.ts", "api/__tests__/**/*.test.ts", "web/**/__tests__/**/*.test.ts"]
