global:
  scrape_interval: 15s
  evaluation_interval: 15s
  external_labels:
    cluster: 'jeju-network'
    environment: 'dev'

# Load alert rules
rule_files:
  - '/etc/prometheus/alerts/*.yaml'
  - '/etc/prometheus/*.yaml'

# Alertmanager configuration
alerting:
  alertmanagers:
    - static_configs:
        - targets: ['alertmanager:9093']
      scheme: http
      timeout: 10s
      api_version: v2

# Scrape configurations
scrape_configs:
  # OP Stack Components
  - job_name: 'op-node'
    static_configs:
      - targets: ['host.docker.internal:7300']
        labels:
          component: 'sequencer'

  - job_name: 'op-batcher'
    static_configs:
      - targets: ['host.docker.internal:7301']
        labels:
          component: 'batcher'

  - job_name: 'op-proposer'
    static_configs:
      - targets: ['host.docker.internal:7302']
        labels:
          component: 'proposer'

  # Reth Execution Layer
  - job_name: 'reth'
    static_configs:
      - targets: ['host.docker.internal:9001']
        labels:
          component: 'execution-layer'

  # Subsquid Indexer
  - job_name: 'subsquid-processor'
    static_configs:
      - targets: ['host.docker.internal:4350']
        labels:
          component: 'indexer'

  - job_name: 'subsquid-api'
    static_configs:
      - targets: ['host.docker.internal:4350']
        labels:
          component: 'graphql-api'

  # Node Explorer
  - job_name: 'node-explorer-api'
    static_configs:
      - targets: ['host.docker.internal:4002']
        labels:
          component: 'monitoring'
  
  - job_name: 'node-explorer-ui'
    static_configs:
      - targets: ['host.docker.internal:4003']
        labels:
          component: 'monitoring'

  # Jeju DA (PeerDAS-integrated Data Availability)
  - job_name: 'jeju-da'
    static_configs:
      - targets: ['jeju-da:3100']
        labels:
          component: 'data-availability'
    metrics_path: '/metrics'

  # Crucible Agent Orchestration
  - job_name: 'crucible-api'
    static_configs:
      - targets: ['host.docker.internal:4020']
        labels:
          component: 'crucible'
    metrics_path: '/metrics'

  # Jeju Oracle Network
  - job_name: 'oracle-network'
    static_configs:
      - targets: ['host.docker.internal:7400']
        labels:
          component: 'oracle'
    metrics_path: '/metrics'

  # ZKSolBridge - Cross-chain Solana/EVM Bridge
  - job_name: 'zksolbridge-relayer'
    static_configs:
      - targets: ['host.docker.internal:8081']
        labels:
          component: 'relayer'
    metrics_path: '/monitoring/metrics/prometheus'

  - job_name: 'zksolbridge-prover'
    static_configs:
      - targets: ['host.docker.internal:8082']
        labels:
          component: 'prover'
    metrics_path: '/monitoring/metrics/prometheus'

  - job_name: 'zksolbridge-xlp'
    static_configs:
      - targets: ['host.docker.internal:8083']
        labels:
          component: 'xlp'
    metrics_path: '/monitoring/metrics/prometheus'

  # DWS Cache Service (API on port 4030)
  - job_name: 'dws-cache'
    static_configs:
      - targets: ['host.docker.internal:4030']
        labels:
          component: 'cache'
    metrics_path: '/cache/metrics'

  # Prometheus self-monitoring
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

