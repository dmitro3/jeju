replicaCount: 2

image:
  repository: ghcr.io/jeju/proxy-coordinator
  pullPolicy: IfNotPresent
  tag: "latest"

nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  annotations: {}
  name: ""

podAnnotations:
  prometheus.io/scrape: "true"
  prometheus.io/port: "4020"

podSecurityContext:
  fsGroup: 1000
  runAsUser: 1000
  runAsNonRoot: true

securityContext:
  capabilities:
    drop:
    - ALL
  readOnlyRootFilesystem: false
  runAsNonRoot: true
  runAsUser: 1000

service:
  type: ClusterIP
  httpPort: 4020
  wsPort: 4021

resources:
  limits:
    cpu: 2000m
    memory: 2Gi
  requests:
    cpu: 500m
    memory: 512Mi

autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 70
  targetMemoryUtilizationPercentage: 80

nodeSelector: {}

tolerations: []

affinity:
  podAntiAffinity:
    preferredDuringSchedulingIgnoredDuringExecution:
    - weight: 100
      podAffinityTerm:
        labelSelector:
          matchExpressions:
          - key: app.kubernetes.io/name
            operator: In
            values:
            - proxy-coordinator
        topologyKey: kubernetes.io/hostname

config:
  rpcUrl: "http://reth-rpc:8545"
  proxyRegistryAddress: ""  # Set after contract deployment
  proxyPaymentAddress: ""   # Set after contract deployment
  coordinatorPrivateKey: "" # Injected from Vault
  heartbeatIntervalMs: 30000
  requestTimeoutMs: 30000
  maxConcurrentRequestsPerNode: 10
  
  # External provider fallback (optional)
  externalProviders:
    brightdata:
      enabled: false
      username: ""
      password: ""
      zone: "residential"
      markupBps: 1000  # 10%

# Ingress for external access
ingress:
  enabled: false
  className: "nginx"
  annotations: {}
  hosts:
    - host: proxy.jeju.network
      paths:
        - path: /
          pathType: Prefix
  tls: []

