# CovenantSQL Testnet Values
# Deployment configuration for Base Sepolia testnet

global:
  network: testnet
  chainId: 84532

image:
  repository: ghcr.io/jeju-network/covenantsql
  tag: "v0.8.1"

# Block Producer - single instance
blockProducer:
  enabled: true
  replicaCount: 1

  resources:
    limits:
      cpu: 2000m
      memory: 4Gi
    requests:
      cpu: 1000m
      memory: 2Gi

  persistence:
    enabled: true
    storageClass: "gp3"
    size: 100Gi

# Miners - 3 instances for consensus
miner:
  enabled: true
  replicaCount: 3

  resources:
    limits:
      cpu: 1000m
      memory: 2Gi
    requests:
      cpu: 500m
      memory: 1Gi

  persistence:
    enabled: true
    storageClass: "gp3"
    size: 200Gi

# Ingress with TLS
ingress:
  enabled: true
  className: nginx
  annotations:
    nginx.ingress.kubernetes.io/backend-protocol: "HTTP"
    nginx.ingress.kubernetes.io/proxy-body-size: "50m"
    nginx.ingress.kubernetes.io/proxy-read-timeout: "300"
    nginx.ingress.kubernetes.io/proxy-send-timeout: "300"
    cert-manager.io/cluster-issuer: "letsencrypt-prod"
  hosts:
    - host: cql.testnet.jejunetwork.org
      paths:
        - path: /
          pathType: Prefix
  tls:
    - secretName: cql-testnet-tls
      hosts:
        - cql.testnet.jejunetwork.org

# RPC endpoints
rpc:
  primary: "https://sepolia.base.org"
  fallback: "https://base-sepolia.g.alchemy.com/v2/${ALCHEMY_API_KEY}"

# Contract addresses from unified deployment
# CQL uses ComputeRegistry (with serviceType=database) instead of separate contracts
contracts:
  computeRegistry: ""
  serviceRegistry: ""
  creditManager: ""

# Operator configuration
operator:
  privateKeySecret: cql-operator-testnet
  privateKeyKey: private-key
  heartbeatIntervalMs: 60000
  autoRegister: true

# Monitoring
metrics:
  enabled: true

serviceMonitor:
  enabled: true
  namespace: monitoring
  interval: 30s

# Pod Disruption Budget
podDisruptionBudget:
  enabled: true
  minAvailable: 2

# Network Policy
networkPolicy:
  enabled: true
