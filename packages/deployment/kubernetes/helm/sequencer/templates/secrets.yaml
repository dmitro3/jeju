apiVersion: v1
kind: Secret
metadata:
  name: {{ include "sequencer.fullname" . }}-jwt
  labels:
    {{- include "sequencer.labels" . | nindent 4 }}
type: Opaque
data:
  {{- if .Values.jwtSecret }}
  jwt.hex: {{ .Values.jwtSecret | b64enc | quote }}
  {{- else }}
  # Generate random JWT secret if not provided
  jwt.hex: {{ randAlphaNum 64 | b64enc | quote }}
  {{- end }}
---
{{- if .Values.thresholdBatcher.enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "sequencer.fullname" . }}-batcher
  labels:
    {{- include "sequencer.labels" . | nindent 4 }}
type: Opaque
data:
  # MPC cluster authentication
  {{- if .Values.thresholdBatcher.mpc.authToken }}
  mpc-auth-token: {{ .Values.thresholdBatcher.mpc.authToken | b64enc | quote }}
  {{- else }}
  mpc-auth-token: {{ randAlphaNum 32 | b64enc | quote }}
  {{- end }}
{{- end }}
---
{{- if .Values.thresholdProposer.enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "sequencer.fullname" . }}-proposer
  labels:
    {{- include "sequencer.labels" . | nindent 4 }}
type: Opaque
data:
  # MPC cluster authentication
  {{- if .Values.thresholdProposer.mpc.authToken }}
  mpc-auth-token: {{ .Values.thresholdProposer.mpc.authToken | b64enc | quote }}
  {{- else }}
  mpc-auth-token: {{ randAlphaNum 32 | b64enc | quote }}
  {{- end }}
{{- end }}

