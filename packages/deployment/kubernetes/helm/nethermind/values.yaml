# Nethermind Ethereum Client - Execution Layer
# Supports L1 (Sepolia/Mainnet) and L2 (Jeju) operation modes

mode: "l1"  # l1 or l2

image:
  repository: nethermind/nethermind
  pullPolicy: IfNotPresent
  tag: "1.28.0"

nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  annotations: {}
  name: ""

podAnnotations:
  prometheus.io/scrape: "true"
  prometheus.io/port: "8008"

podSecurityContext:
  fsGroup: 1000

securityContext:
  capabilities:
    drop:
    - ALL
  readOnlyRootFilesystem: false
  runAsNonRoot: true
  runAsUser: 1000

service:
  type: ClusterIP
  http:
    port: 8545
  ws:
    port: 8546
  engine:
    port: 8551
  p2p:
    port: 30303
  metrics:
    port: 8008

resources:
  limits:
    cpu: 4000m
    memory: 16Gi
  requests:
    cpu: 2000m
    memory: 8Gi

persistence:
  enabled: true
  storageClass: "gp3"
  accessMode: ReadWriteOnce
  size: 500Gi
  mountPath: /data

nodeSelector: {}

tolerations: []

affinity:
  podAntiAffinity:
    preferredDuringSchedulingIgnoredDuringExecution:
    - weight: 100
      podAffinityTerm:
        labelSelector:
          matchExpressions:
          - key: app.kubernetes.io/name
            operator: In
            values:
            - nethermind
        topologyKey: kubernetes.io/hostname

config:
  # Network configuration
  network: "sepolia"  # mainnet, sepolia, or custom
  
  # Sync mode
  syncMode: "snap"  # snap, fast, full, archive
  
  # JSON-RPC
  jsonRpc:
    enabled: true
    host: "0.0.0.0"
    port: 8545
    enabledModules: "Eth,Subscribe,Trace,TxPool,Web3,Personal,Proof,Net,Parity,Health"
    additionalRpcUrls: ""
  
  # WebSocket
  websocket:
    enabled: true
    host: "0.0.0.0"
    port: 8546
  
  # Engine API (Merge/PoS)
  engine:
    enabled: true
    host: "0.0.0.0"
    port: 8551
  
  # P2P
  p2p:
    port: 30303
    maxPeers: 50
    discoveryEnabled: true
  
  # Metrics
  metrics:
    enabled: true
    port: 8008
  
  # Pruning
  pruning:
    enabled: true
    mode: "Full"  # Full, Archive, None
  
  # Database
  database:
    path: "/data"
    
  # Logging
  logging:
    level: "INFO"

# L2 specific config (when mode: l2)
l2Config:
  chainSpec: "/chainspec/jeju.json"
  rollupSequencerHttp: ""
  
# Secrets
secrets:
  jwtSecret: ""  # Auto-generated if empty

