{{- if .Values.secrets.jwtSecret }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "geth-l1.fullname" . }}-secrets
  labels:
    {{- include "geth-l1.labels" . | nindent 4 }}
  annotations:
    # This secret should be managed by External Secrets Operator or Vault in production
    vault.hashicorp.com/agent-inject: "true"
    vault.hashicorp.com/role: "geth-l1"
type: Opaque
data:
  # JWT secret must be provided via --set or external secret manager
  # Never use hardcoded secrets - generate with: openssl rand -hex 32
  jwt.hex: {{ .Values.secrets.jwtSecret | b64enc | quote }}
{{- else }}
{{- fail "secrets.jwtSecret is required - generate with: openssl rand -hex 32" }}
{{- end }}

