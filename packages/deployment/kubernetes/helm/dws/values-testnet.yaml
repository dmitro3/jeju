# Testnet-specific values for DWS

replicaCount: 3

image:
  repository: jeju/dws
  tag: "testnet-latest"

ingress:
  enabled: true
  hosts:
    - host: dws.testnet.jejunetwork.org
      paths:
        - path: /
          pathType: Prefix
    - host: git.testnet.jejunetwork.org
      paths:
        - path: /
          pathType: Prefix
    - host: npm.testnet.jejunetwork.org
      paths:
        - path: /
          pathType: Prefix
    - host: hub.testnet.jejunetwork.org
      paths:
        - path: /
          pathType: Prefix
    - host: registry.testnet.jejunetwork.org
      paths:
        - path: /
          pathType: Prefix
    - host: storage.testnet.jejunetwork.org
      paths:
        - path: /
          pathType: Prefix
  tls:
    - secretName: dws-testnet-tls
      hosts:
        - dws.testnet.jejunetwork.org
        - git.testnet.jejunetwork.org
        - npm.testnet.jejunetwork.org
        - hub.testnet.jejunetwork.org
        - registry.testnet.jejunetwork.org
        - storage.testnet.jejunetwork.org

resources:
  limits:
    cpu: 2000m
    memory: 4Gi
  requests:
    cpu: 500m
    memory: 1Gi

config:
  network: testnet
  chainId: 84532
  rpcUrl: "https://sepolia.base.org"
  
  # Contract addresses - populated after deployment
  contracts:
    identityRegistry: "${IDENTITY_REGISTRY_ADDRESS}"
    repoRegistry: "${REPO_REGISTRY_ADDRESS}"
    packageRegistry: "${PACKAGE_REGISTRY_ADDRESS}"
    containerRegistry: "${CONTAINER_REGISTRY_ADDRESS}"
    modelRegistry: "${MODEL_REGISTRY_ADDRESS}"
    jnsRegistry: "${JNS_REGISTRY_ADDRESS}"
    storageManager: "${STORAGE_MANAGER_ADDRESS}"
  
  storage:
    primary: ipfs
    permanent: true
    backends:
      - type: ipfs
        enabled: true
        gateway: "https://ipfs.testnet.jejunetwork.org"
        pinningService: "internal"
      - type: webtorrent
        enabled: true
  
  cdn:
    enabled: true
    edgeNodes: 3
    regions:
      - us-east-1
      - eu-west-1
      - ap-northeast-1
  
  p2p:
    enabled: true
    bootstrapPeers:
      - "/dns4/dws-0.testnet.jejunetwork.org/tcp/4031"
      - "/dns4/dws-1.testnet.jejunetwork.org/tcp/4031"
      - "/dns4/dws-2.testnet.jejunetwork.org/tcp/4031"

env:
  - name: NODE_ENV
    value: "production"
  - name: DWS_PORT
    value: "4030"
  - name: LOG_LEVEL
    value: "info"
  - name: NETWORK
    value: "testnet"
  - name: DWS_P2P_ENABLED
    value: "true"
  - name: DWS_BASE_URL
    value: "https://dws.testnet.jejunetwork.org"

persistence:
  enabled: true
  storageClass: "gp3"
  size: 100Gi

autoscaling:
  enabled: true
  minReplicas: 3
  maxReplicas: 10
  targetCPUUtilizationPercentage: 70

metrics:
  enabled: true
  serviceMonitor:
    enabled: true

